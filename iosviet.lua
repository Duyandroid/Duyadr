--[[ 

    Duy Trường - ULTRA MAX EDITION

    - Watermark: DuyTrường | Fps Counter (Góc trái).

    - Slider: Kéo chỉnh FOV thay vì bấm nút.

    - Hitbox: Đầu 15 (Tàng hình 85%).

    - ESP: Line Top, Box Green, Counter Bold.

    - Support: Delta, Skibix, Hydrogen, Fluxus.

]]

local Players = game:GetService("Players")

local RunService = game:GetService("RunService")

local TweenService = game:GetService("TweenService")

local UserInputService = game:GetService("UserInputService")

local CoreGui = game:GetService("CoreGui")

local LocalPlayer = Players.LocalPlayer

local Camera = workspace.CurrentCamera

-- 1. HỆ THỐNG ANTI-BAN & BYPASS

local function ActivateAntiBan()

    pcall(function()

        for _, v in pairs(game:GetDescendants()) do

            if v:IsA("LocalScript") and (v.Name:find("Cheat") or v.Name:find("Ban") or v.Name:find("Detect")) then

                v.Disabled = true

            end

        end

    end)

end

ActivateAntiBan()

-- 2. DỌN DẸP UI CŨ

for _, v in pairs(CoreGui:GetChildren()) do

    if v.Name:find("DuyTrường") then v:Destroy() end

end

local ScreenGui = Instance.new("ScreenGui", CoreGui)

ScreenGui.Name = "DuyTrường"

ScreenGui.ResetOnSpawn = false

ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- 3. CẤU HÌNH & BIẾN

_G.Config = {

    Aimbot = false,

    HitboxHuge = false,

    AimRadius = 180,

    ESPLine = false,

    ESPBox = false,

    ESPHP = false,

    Smoothness = 0.12

}

-- 4. WATERMARK & FPS COUNTER (GÓC TRÁI TRÊN)

local WatermarkFrame = Instance.new("Frame", ScreenGui)

WatermarkFrame.Size = UDim2.new(0, 200, 0, 30); WatermarkFrame.Position = UDim2.new(0, 15, 0, 5)

WatermarkFrame.BackgroundTransparency = 1

local FPSLabel = Instance.new("TextLabel", WatermarkFrame)

FPSLabel.Size = UDim2.new(1, 0, 1, 0)

FPSLabel.BackgroundTransparency = 1

FPSLabel.Font = Enum.Font.GothamBlack

FPSLabel.TextColor3 = Color3.fromRGB(0, 255, 255) -- Màu Cyan Neon

FPSLabel.TextSize = 20

FPSLabel.TextStrokeTransparency = 0 -- Viền đen đậm

FPSLabel.TextXAlignment = Enum.TextXAlignment.Left

FPSLabel.Text = "DuyTrường | Fps: 60"

RunService.RenderStepped:Connect(function(deltaTime)

    local fps = math.floor(1 / deltaTime)

    FPSLabel.Text = "DuyTrường | Fps: " .. fps

end)

-- 5. HỆ THỐNG DRAWING (ESP & FOV & COUNTER)

local FOVCircle = Drawing.new("Circle")

FOVCircle.Thickness = 1.5; FOVCircle.NumSides = 60; FOVCircle.Radius = _G.Config.AimRadius

FOVCircle.Filled = false; FOVCircle.Color = Color3.fromRGB(0, 255, 100); FOVCircle.Visible = true

-- Target Counter (Số lượng địch - ĐẬM & TO)

local TargetCounter = Drawing.new("Text")

TargetCounter.Size = 50 -- Size to hơn (cũ là 40)

TargetCounter.Center = true

TargetCounter.Outline = true

TargetCounter.OutlineColor = Color3.new(0,0,0) -- Viền đen tuyệt đối

TargetCounter.Color = Color3.fromRGB(255, 0, 0) -- Đỏ tươi

TargetCounter.Position = Vector2.new(Camera.ViewportSize.X/2, 50)

TargetCounter.Visible = false

TargetCounter.Font = 3 -- Font đậm nhất của Drawing

local function CreateESP(plr)

    local Box = Drawing.new("Square"); local Line = Drawing.new("Line")

    local HPBg = Drawing.new("Square"); local HPBar = Drawing.new("Square")

    

    RunService.RenderStepped:Connect(function()

        if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") and plr ~= LocalPlayer and plr.Character.Humanoid.Health > 0 then

            local Root = plr.Character.HumanoidRootPart

            local Head = plr.Character:FindFirstChild("Head")

            local Pos, OnScreen = Camera:WorldToViewportPoint(Root.Position)

            

            if OnScreen then

                local SizeY = 2300 / Pos.Z; local SizeX = SizeY / 1.6

                local PosX = Pos.X - SizeX / 2; local PosY = Pos.Y - SizeY / 2

                

                -- ESP BOX (Xanh lá mượt, nét mảnh)

                Box.Visible = _G.Config.ESPBox; Box.Size = Vector2.new(SizeX, SizeY); Box.Position = Vector2.new(PosX, PosY)

                Box.Color = Color3.fromRGB(0, 255, 100); Box.Thickness = 1.5; Box.Filled = false

                

                -- ESP LINE (Full Upgrade - Kẻ từ Top Center)

                Line.Visible = _G.Config.ESPLine

                Line.From = Vector2.new(Camera.ViewportSize.X/2, 0) -- Từ mép trên cùng

                if Head then

                    local hPos = Camera:WorldToViewportPoint(Head.Position)

                    Line.To = Vector2.new(hPos.X, hPos.Y)

                else

                    Line.To = Vector2.new(Pos.X, PosY)

                end

                Line.Color = Color3.fromRGB(255, 255, 255); Line.Thickness = 1.2

                

                -- ESP HP

                local hp = plr.Character.Humanoid.Health / plr.Character.Humanoid.MaxHealth

                HPBg.Visible = _G.Config.ESPHP; HPBg.Size = Vector2.new(3, SizeY); HPBg.Position = Vector2.new(PosX - 6, PosY); HPBg.Color = Color3.new(0,0,0); HPBg.Filled = true

                HPBar.Visible = _G.Config.ESPHP; HPBar.Size = Vector2.new(3, SizeY * hp); HPBar.Position = Vector2.new(PosX - 6, PosY + (SizeY - (SizeY * hp))); HPBar.Color = Color3.fromRGB(0, 255, 100); HPBar.Filled = true

            else Box.Visible = false; Line.Visible = false; HPBar.Visible = false; HPBg.Visible = false end

        else Box.Visible = false; Line.Visible = false; HPBar.Visible = false; HPBg.Visible = false end

    end)

end

for _, v in pairs(Players:GetPlayers()) do CreateESP(v) end

Players.PlayerAdded:Connect(CreateESP)

-- 6. GIAO DIỆN MENU VIP (BO TRÒN & HIỆU ỨNG)

local MainFrame = Instance.new("Frame", ScreenGui)

MainFrame.Size = UDim2.new(0, 320, 0, 440); MainFrame.Position = UDim2.new(0.5, -160, 0.5, -220)

MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 30)

MainFrame.BorderSizePixel = 0; MainFrame.ClipsDescendants = true

Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 20)

-- Header Đỏ

local Header = Instance.new("Frame", MainFrame)

Header.Size = UDim2.new(1, 0, 0, 55); Header.BackgroundColor3 = Color3.fromRGB(220, 30, 30)

local HTitle = Instance.new("TextLabel", Header)

HTitle.Size = UDim2.new(1, 0, 1, 0); HTitle.Text = "DuyTrường v1"; HTitle.TextColor3 = Color3.new(1,1,1); HTitle.Font = Enum.Font.GothamBlack; HTitle.TextSize = 22; HTitle.BackgroundTransparency = 1

-- Container

local Container = Instance.new("Frame", MainFrame)

Container.Size = UDim2.new(1, -20, 1, -80); Container.Position = UDim2.new(0, 10, 0, 65); Container.BackgroundTransparency = 1

local Layout = Instance.new("UIListLayout", Container); Layout.Padding = UDim.new(0, 10); Layout.SortOrder = Enum.SortOrder.LayoutOrder

-- HÀM TẠO NÚT

function CreateOption(text, flag)

    local Btn = Instance.new("TextButton", Container)

    Btn.Size = UDim2.new(1, 0, 0, 45)

    Btn.BackgroundColor3 = Color3.fromRGB(40, 40, 60)

    Btn.Text = text; Btn.TextColor3 = Color3.new(1,1,1); Btn.Font = Enum.Font.GothamBold; Btn.TextSize = 14

    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 12)

    local Stroke = Instance.new("UIStroke", Btn); Stroke.Color = Color3.fromRGB(80, 80, 100); Stroke.Thickness = 1.5; Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    Btn.MouseButton1Click:Connect(function()

        _G.Config[flag] = not _G.Config[flag]

        if _G.Config[flag] then

            TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 180, 255)}):Play()

            Stroke.Color = Color3.new(1,1,1)

        else

            TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 60)}):Play()

            Stroke.Color = Color3.fromRGB(80, 80, 100)

        end

    end)

end

-- === [NÂNG CẤP] SLIDER KÉO THẢ FOV ===

function CreateSlider()

    local Holder = Instance.new("Frame", Container); Holder.Size = UDim2.new(1, 0, 0, 60); Holder.BackgroundTransparency = 1

    

    local Title = Instance.new("TextLabel", Holder)

    Title.Size = UDim2.new(1, 0, 0, 20); Title.Text = "AIM RADIUS: 180"; Title.TextColor3 = Color3.new(1,1,1); Title.Font = Enum.Font.GothamBold; Title.BackgroundTransparency = 1; Title.TextSize = 13

    

    local SliderBar = Instance.new("Frame", Holder)

    SliderBar.Size = UDim2.new(0.9, 0, 0, 6); SliderBar.Position = UDim2.new(0.05, 0, 0.6, 0)

    SliderBar.BackgroundColor3 = Color3.fromRGB(60, 60, 80); Instance.new("UICorner", SliderBar).CornerRadius = UDim.new(1, 0)

    

    local Knob = Instance.new("TextButton", SliderBar)

    Knob.Size = UDim2.new(0, 20, 0, 20); Knob.Position = UDim2.new(0.35, -10, 0.5, -10); Knob.Text = ""

    Knob.BackgroundColor3 = Color3.fromRGB(0, 255, 100); Instance.new("UICorner", Knob).CornerRadius = UDim.new(1, 0)

    

    -- Logic Kéo

    local dragging = false

    Knob.MouseButton1Down:Connect(function() dragging = true end)

    UserInputService.InputEnded:Connect(function(input) 

        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false end 

    end)

    

    UserInputService.InputChanged:Connect(function(input)

        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then

            local pos = math.clamp((input.Position.X - SliderBar.AbsolutePosition.X) / SliderBar.AbsoluteSize.X, 0, 1)

            Knob.Position = UDim2.new(pos, -10, 0.5, -10)

            local val = math.floor(pos * 500)

            if val < 10 then val = 10 end

            _G.Config.AimRadius = val

            Title.Text = "AIM RADIUS: " .. val

            FOVCircle.Radius = val

        end

    end)

end

CreateOption("AIMBOT (BODY) - NO SHAKE", "Aimbot")

CreateOption("HeadLock", "HitboxHuge")

CreateSlider() -- Slider Kéo

CreateOption("ESP LINE (TOP UPGRADE)", "ESPLine")

CreateOption("ESP BOX (GREEN)", "ESPBox")

CreateOption("ESP HP", "ESPHP")

-- Icon

local Icon = Instance.new("ImageButton", ScreenGui); Icon.Size = UDim2.new(0, 55, 0, 55); Icon.Position = UDim2.new(0.1, 0, 0.2, 0)

Icon.BackgroundColor3 = Color3.fromRGB(15, 15, 30); Icon.Image = "rbxassetid://3570695787"

Instance.new("UICorner", Icon).CornerRadius = UDim.new(1,0); Icon.Draggable = true

Icon.MouseButton1Click:Connect(function() MainFrame.Visible = not MainFrame.Visible end)

-- 7. LOGIC LOOP

RunService.RenderStepped:Connect(function()

    FOVCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)

    

    -- HITBOX 15

    if _G.Config.HitboxHuge then

        for _, p in pairs(Players:GetPlayers()) do

            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then

                p.Character.Head.Size = Vector3.new(15, 15, 15)

                p.Character.Head.Transparency = 0.85

                p.Character.Head.CanCollide = false

            end

        end

    end

    -- AIMBOT SMOOTH

    local target = nil; local minD = _G.Config.AimRadius

    if _G.Config.Aimbot then

        for _, p in pairs(Players:GetPlayers()) do

            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character.Humanoid.Health > 0 then

                local pos, vis = Camera:WorldToViewportPoint(p.Character.HumanoidRootPart.Position)

                if vis then

                    local dist = (Vector2.new(pos.X, pos.Y) - FOVCircle.Position).Magnitude

                    if dist < minD then minD = dist; target = p.Character.HumanoidRootPart end

                end

            end

        end

        if target then

            local targetPos = target.Position + target.Velocity * 0.05

            Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position, targetPos), _G.Config.Smoothness)

        end

    end

    

    -- COUNTER

    local c = 0

    for _, p in pairs(Players:GetPlayers()) do

        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then

            local _, v = Camera:WorldToViewportPoint(p.Character.HumanoidRootPart.Position); if v then c=c+1 end

        end

    end

    TargetCounter.Visible = (_G.Config.ESPBox or _G.Config.ESPLine); TargetCounter.Text = tostring(c)

end)